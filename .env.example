# Example Configuration

This file shows how to configure your Instagram Gemini Bot.

## 1. Get Your Credentials

### Instagram Credentials
- **App ID**: Found in Meta App Dashboard ‚Üí Settings ‚Üí Basic
- **App Secret**: Found in Meta App Dashboard ‚Üí Settings ‚Üí Basic
- **Access Token**: Generate in Messenger settings or use Graph API
- **Page ID**: Your Instagram Business Account page ID
- **Bot Instagram ID**: Same as Page ID usually, or your bot's account ID

Get these from:
- [Meta Developers Dashboard](https://developers.facebook.com/apps/)

### Gemini API Key
- Go to [Google AI Studio](https://aistudio.google.com/app/apikey)
- Click "Create API Key"
- Copy the key

### Verify Token
- Create any random string (e.g., `my_secret_token_123`)
- Use the same token in your .env and Instagram webhook settings

## 2. Setup Options

### Option A: Quick Interactive Setup
```bash
insta-bot init
```

### Option B: Manual .env Creation

Create a `.env` file in your project root:

```env
# Instagram Configuration
INSTAGRAM_APP_ID=1234567890
INSTAGRAM_APP_SECRET=abc123def456ghi789
INSTAGRAM_ACCESS_TOKEN=IGQWRZAcWlCM1VlRW9...
VERIFY_TOKEN=my_verify_token_123
BOT_PAGE_ID=17841414943450863
BOT_INSTAGRAM_ID=17841414943450863

# Gemini Configuration
GEMINI_API_KEY=AIzaSyDMPKS9DxDckwB5Af0hw-W95nKSAwLOu-4
GEMINI_MODEL=gemini-2.5-flash-lite

# Bot Personality
BOT_NAME=MyAssistant
BOT_INSTRUCTIONS=You are a helpful Instagram assistant. Keep responses concise (under 1000 characters). Use friendly language and emojis occasionally.

# Database
DB_PATH=./conversations.db
```

## 3. Bot Instructions Examples

### Customer Service Bot
```
You are a helpful customer service assistant for TechCorp.
- Answer questions about our products
- Help with orders and returns
- Be professional but friendly
- Keep responses under 500 characters
- If you don't know something, say so and offer to connect them with a human
```

### Pizza Shop
```
You are a friendly assistant for Marco's Pizza.
- Help customers order pizza
- Suggest toppings
- Answer about delivery
- Keep it casual and fun
- Use pizza emojis! üçï
```

### Personal Assistant (Jatin's Style)
```
You are Jatin. You're replying to Instagram DMs naturally and authentically.
- Be cool but engaged
- Use Hinglish naturally (mix English and Hindi like real people)
- Playful humor, not desperate
- Short messages like real texting
- Remember what people said before
```

## 4. Verify Your Setup

```bash
# Validate all required variables are set
insta-bot validate

# Should output:
# ‚úÖ Configuration is valid!
#   Bot Name: MyAssistant
#   Gemini Model: gemini-2.5-flash-lite
#   Page ID: 17841414943450863
```

## 5. Run the Bot

```bash
# Local testing
python main.py

# Production with gunicorn
gunicorn -w 4 -b 0.0.0.0:8000 main:bot.app
```

## 6. Set Up Instagram Webhook

1. Go to your app in Meta Dashboard
2. Go to **Messenger** ‚Üí **Settings**
3. Under **Webhooks**, click **Add Callback URL**
4. Enter:
   - **Callback URL**: `https://yourdomain.com/webhook`
   - **Verify Token**: (the token from your .env)
5. Under **Webhook Fields**, select:
   - ‚úÖ `messages`
   - ‚úÖ `message_echoes`
   - ‚úÖ `messaging_postbacks`
6. Click **Verify and Save**

For testing locally with ngrok:
```bash
ngrok http 8000
# Use the HTTPS URL provided, e.g., https://abc123d.ngrok.io/webhook
```

## 7. Test the Bot

Send a message to your bot on Instagram and you should see:
1. Message received in console
2. Gemini processing the message
3. Response sent back to Instagram

Check the logs:
```
üì® Message from user123: Hello!
‚úÖ Message sent to user123: Hey! How can I help?
```

## Environment Variables Reference

| Variable | Required | Description |
|----------|----------|-------------|
| INSTAGRAM_APP_ID | ‚úÖ | Your Meta App ID |
| INSTAGRAM_APP_SECRET | ‚úÖ | Your Meta App Secret |
| INSTAGRAM_ACCESS_TOKEN | ‚úÖ | Page Access Token |
| VERIFY_TOKEN | ‚úÖ | Token for webhook verification |
| BOT_PAGE_ID | ‚úÖ | Instagram Page ID |
| BOT_INSTAGRAM_ID | ‚úÖ | Bot Account ID |
| GEMINI_API_KEY | ‚úÖ | Google Gemini API Key |
| GEMINI_MODEL | ‚ùå | Gemini model (default: gemini-2.5-flash-lite) |
| BOT_NAME | ‚ùå | Bot name (default: Assistant) |
| BOT_INSTRUCTIONS | ‚ùå | System prompt (default: generic assistant) |
| DB_PATH | ‚ùå | Path to SQLite database |

## Troubleshooting

### Can't get Access Token
- Make sure your app is in Development or Live mode
- Check that you have Instagram product added
- Try creating a new token

### Webhook verification fails
- Check VERIFY_TOKEN matches in .env and Instagram settings
- Make sure your domain is HTTPS and publicly accessible
- Check firewall isn't blocking port 8000

### No responses being sent
- Check GEMINI_API_KEY is valid
- Check INSTAGRAM_ACCESS_TOKEN is valid
- Look at console logs for errors

### Responses are too long/short
- Adjust BOT_INSTRUCTIONS or `max_output_tokens` in code
- Try different GEMINI_MODEL

---

Need help? Create an issue on GitHub!
